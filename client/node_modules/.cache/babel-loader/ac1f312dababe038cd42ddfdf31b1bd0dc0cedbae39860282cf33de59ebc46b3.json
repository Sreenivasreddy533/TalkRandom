{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sreen\\\\omegle-clone\\\\client\\\\src\\\\components\\\\ChatPanel.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { useSocket } from \"../context/SocketContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatPanel = ({\n  partnerId\n}) => {\n  _s();\n  const {\n    socket\n  } = useSocket();\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState(\"\");\n  const containerRef = useRef(null);\n  useEffect(() => {\n    if (!socket) return;\n    const handleMessage = ({\n      from,\n      message,\n      sentAt\n    }) => {\n      setMessages(prev => [...prev, {\n        id: `${sentAt}-${from}`,\n        from,\n        text: message,\n        ts: sentAt\n      }]);\n    };\n    socket.on(\"chat-message\", handleMessage);\n    return () => socket.off(\"chat-message\");\n  }, [socket]);\n  useEffect(() => {\n    if (containerRef.current) {\n      containerRef.current.scrollTop = containerRef.current.scrollHeight;\n    }\n  }, [messages]);\n  const sendMessage = () => {\n    if (!input.trim() || !socket || !partnerId) return;\n    const text = input.trim();\n    const ts = Date.now();\n    setMessages(prev => [...prev, {\n      id: `self-${ts}`,\n      from: socket.id,\n      text,\n      ts\n    }]);\n    socket.emit(\"chat-message\", {\n      to: partnerId,\n      message: text\n    });\n    setInput(\"\");\n  };\n  const handleKey = e => {\n    if (e.key === \"Enter\" && !e.shiftKey) {\n      e.preventDefault();\n      sendMessage();\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card chat-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: \"0.5rem\",\n        fontSize: \"0.9rem\",\n        fontWeight: 600\n      },\n      children: \"\\uD83D\\uDCAC Chat\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: containerRef,\n      className: \"chat-messages\",\n      children: [messages.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          height: \"100%\",\n          display: \"flex\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n          fontSize: \"0.85rem\",\n          opacity: 0.6\n        },\n        children: \"\\uD83D\\uDC4B Say hi while connecting!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }, this), messages.map(m => {\n        const isSelf = socket && m.from === socket.id;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `chat-message ${isSelf ? \"self\" : \"\"}`,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `chat-bubble ${isSelf ? \"self\" : \"other\"}`,\n            children: m.text\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 15\n          }, this)\n        }, m.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-input-row\",\n      children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n        rows: 2,\n        value: input,\n        onChange: e => setInput(e.target.value),\n        onKeyDown: handleKey,\n        placeholder: partnerId ? \"Type message (Shift+Enter for new line)â€¦\" : \"Start chat\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary\",\n        disabled: !partnerId || !input.trim(),\n        onClick: sendMessage,\n        style: {\n          alignSelf: \"flex-end\"\n        },\n        children: \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatPanel, \"WeDNuYOi+mKOaUD4uCnSZou5KP4=\", false, function () {\n  return [useSocket];\n});\n_c = ChatPanel;\nexport default ChatPanel;\nvar _c;\n$RefreshReg$(_c, \"ChatPanel\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useSocket","jsxDEV","_jsxDEV","ChatPanel","partnerId","_s","socket","messages","setMessages","input","setInput","containerRef","handleMessage","from","message","sentAt","prev","id","text","ts","on","off","current","scrollTop","scrollHeight","sendMessage","trim","Date","now","emit","to","handleKey","e","key","shiftKey","preventDefault","className","children","style","marginBottom","fontSize","fontWeight","fileName","_jsxFileName","lineNumber","columnNumber","ref","length","height","display","alignItems","justifyContent","opacity","map","m","isSelf","rows","value","onChange","target","onKeyDown","placeholder","disabled","onClick","alignSelf","_c","$RefreshReg$"],"sources":["C:/Users/sreen/omegle-clone/client/src/components/ChatPanel.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport { useSocket } from \"../context/SocketContext\";\r\n\r\nconst ChatPanel = ({ partnerId }) => {\r\n  const { socket } = useSocket();\r\n  const [messages, setMessages] = useState([]);\r\n  const [input, setInput] = useState(\"\");\r\n  const containerRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!socket) return;\r\n\r\n    const handleMessage = ({ from, message, sentAt }) => {\r\n      setMessages((prev) => [\r\n        ...prev,\r\n        { id: `${sentAt}-${from}`, from, text: message, ts: sentAt }\r\n      ]);\r\n    };\r\n\r\n    socket.on(\"chat-message\", handleMessage);\r\n    return () => socket.off(\"chat-message\");\r\n  }, [socket]);\r\n\r\n  useEffect(() => {\r\n    if (containerRef.current) {\r\n      containerRef.current.scrollTop = containerRef.current.scrollHeight;\r\n    }\r\n  }, [messages]);\r\n\r\n  const sendMessage = () => {\r\n    if (!input.trim() || !socket || !partnerId) return;\r\n    const text = input.trim();\r\n    const ts = Date.now();\r\n    setMessages((prev) => [\r\n      ...prev,\r\n      { id: `self-${ts}`, from: socket.id, text, ts }\r\n    ]);\r\n    socket.emit(\"chat-message\", { to: partnerId, message: text });\r\n    setInput(\"\");\r\n  };\r\n\r\n  const handleKey = (e) => {\r\n    if (e.key === \"Enter\" && !e.shiftKey) {\r\n      e.preventDefault();\r\n      sendMessage();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"card chat-container\">\r\n      <div style={{ marginBottom: \"0.5rem\", fontSize: \"0.9rem\", fontWeight: 600 }}>\r\n        ðŸ’¬ Chat\r\n      </div>\r\n\r\n      <div ref={containerRef} className=\"chat-messages\">\r\n        {messages.length === 0 && (\r\n          <div\r\n            style={{\r\n              height: \"100%\",\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\",\r\n              fontSize: \"0.85rem\",\r\n              opacity: 0.6\r\n            }}\r\n          >\r\n            ðŸ‘‹ Say hi while connecting!\r\n          </div>\r\n        )}\r\n        {messages.map((m) => {\r\n          const isSelf = socket && m.from === socket.id;\r\n          return (\r\n            <div key={m.id} className={`chat-message ${isSelf ? \"self\" : \"\"}`}>\r\n              <div className={`chat-bubble ${isSelf ? \"self\" : \"other\"}`}>\r\n                {m.text}\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      <div className=\"chat-input-row\">\r\n        <textarea\r\n          rows={2}\r\n          value={input}\r\n          onChange={(e) => setInput(e.target.value)}\r\n          onKeyDown={handleKey}\r\n          placeholder={partnerId ? \"Type message (Shift+Enter for new line)â€¦\" : \"Start chat\"}\r\n        />\r\n        <button\r\n          className=\"btn btn-primary\"\r\n          disabled={!partnerId || !input.trim()}\r\n          onClick={sendMessage}\r\n          style={{ alignSelf: \"flex-end\" }}\r\n        >\r\n          Send\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatPanel;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}